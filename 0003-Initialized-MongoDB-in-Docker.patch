From b2a02a0deb6dce9477793815e5c552ba5577cfa3 Mon Sep 17 00:00:00 2001
From: Amitt Dosanjh <amitt.dosanjh@gmail.com>
Date: Tue, 9 Aug 2022 21:18:14 -0500
Subject: [PATCH 3/6] Initialized MongoDB in Docker

---
 server/db/index.js | 18 ++++++++++++++++++
 server/index.js    |  4 ++--
 2 files changed, 20 insertions(+), 2 deletions(-)
 create mode 100644 server/db/index.js

diff --git a/server/db/index.js b/server/db/index.js
new file mode 100644
index 0000000..b033671
--- /dev/null
+++ b/server/db/index.js
@@ -0,0 +1,18 @@
+const mongoose = require("mongoose");
+
+const connectionString = "mongodb://localhost:27017/database";
+
+const connectDB = async () => {
+  try {
+    await mongoose.connect(connectionString, {
+      useNewUrlParser: true,
+      useUnifiedTopology: true,
+    });
+
+    console.log("MongoDB connected!");
+  } catch (err) {
+    console.log("Failed to connect to MongoDB", err);
+  }
+};
+
+connectDB();
diff --git a/server/index.js b/server/index.js
index 792dad2..7f713f7 100644
--- a/server/index.js
+++ b/server/index.js
@@ -1,3 +1,4 @@
+require("./db");
 const express = require("express");
 const path = require("path");
 
@@ -5,9 +6,8 @@ const app = express();
 
 const PORT = 8080;
 
-console.log(path.join(__dirname, "..", "client", "dist", "index.html"));
-
 app.use(express.static(path.join(__dirname, "..", "client", "dist")));
+app.use(express.json());
 
 app.listen(PORT, () => console.log("listening on port " + PORT));
 
-- 
2.34.1

